---
layout: post
title:  "2021.02"
date: 2021-02-02 08:50:15 +0000   
---

这里记录我工作中用到的技术、解决的案例、和获得的体会。每月更新！

技术
----

### QNX

是一种微内核架构实时操作系统。现在主要用于汽车领域和高端路由设备。

### OSI4

将7层模型中的物理层和数据链路层归一为数据链路层，将会话层、表示层、应用层归一为应用层。

### ECU

电子控制单元，就是常说的车载电脑。现代车辆上通常包含多个ECU，不仅仅是只有发动机才有。多个ECU之间会组成一个网络，通过网络ECU间还可以进行功能调用。

### SOME/IP

基于IP的可扩展的面向服务的中间件，是一种用于车载以太网领域的应用层协议。定义了数据包的格式和消息的类型（REQUEST，REQUEST_NO_RETURN，RESPONSE，NOTIFICATION，ERROR）。SOME/IP-SD是一种特殊的消息，用于client端向服务端订阅服务，然后才能收到服务端的NOTIFICATION消息。它进一步定义了数据包Payload部分的格式和内容。

### DoIP

基于IP的诊断，是一种用于车载以太网领域的应用层协议。应用于测试设备与车辆的点对点连接，点对多连接，多对多连接。在组网中有且只有1个DOIP网关节点。

### pod

是kubernetes的一个概念，是部署的最小单位，包含一组共享PID、netnm、IPC和UTS信息的容器，因此可以比作容器场景下的“逻辑主机”。现在，在虚拟化场景可能也延用了这个概念表达类似的一组虚拟机。不过在容器场景下，pod的下一层通常才是真正的虚拟机。

### ansible

是一种自动化部署工具，支持传统集群场景，云场景和容器化场景。对象主机无需安装agent，控制主机使用ssh与对象主机通信及发起部署任务。从playbook.yml开始，通过良好的结构简单高效地组织部署任务，应用非常广泛。

典型的应用方式是？比如在早期华为云云服务部署过程中是如何应用的？
好像是这样的：云服务安装包本身包含了playbook.yml和云服务业务逻辑代码包。其中playbook.yml中包含了运行云服务代码所需要的硬件和软件配置。第一次部署的时候，需要一台额外的执行机和用于运行云服务虚拟机的第一层“云平台”。执行机能够读取云服务安装包和playbook.yml，并操作云平台按playbook.yml的定义创建所需的虚拟机并安装启动所需的软件，包含云服务业务逻辑代码本身。另外，还有一个云服务是用于部署和升级其他云服务的，通常是通过Web页面，这个云服务也能运用各个云服务安装包完成和执行机一样的功能，一般在第一次部署完成以后就不再通过执行机部署云服务了。

### [Zookeeper](https://developer.ibm.com/zh/technologies/analytics/articles/os-cn-zookeeper/)

是一种分布式服务框架。可以利用它在分布式应用中实现统一命名服务、配置管理、集群管理、分布式锁、消息队列等功能。可以有单机模式、伪集群模式、和集群模式，典型的是集群模式。集群中可以有3种角色，分别是Leader、Follower和Observer，其中只有Leader可以执行客户端的写数据请求。ZK 把数据存储在Znode-Tree中，它是一种内存数据结构，树上每个节点都保有自己的数据以及数据的版本信息，有的数据是持久的，有的数据是临时的，正是因为可以有临时的数据，ZK 才可以应用于集群管理、分布式锁等动态变化的场景。ZK 的核心功能是可以把数据的变化及时地通知对该数据进行了监视的客户端。

### TCP长连接

就是在建立tcp连接和通信之后，不立即调用socket.close()关闭连接，而在满足一定的条件（通常是异常条件）的时候才关闭连接的通信方式。例如，集群场景中节点间的心跳连接通常应该使用长连接以提高性能。

### 车载投屏系统

CarPlay是Apple iOS的车载投屏系统。Android Auto是Google的车载投屏系统。HiCar是华为的车载投屏系统。CarLife是百度的车载投屏系统。

案例
----

* 分析LLVM IR的操作数是一个递归的过程，并且因为PHI节点的存在，递归过程甚至存在一个环，要解开这个环可以将分析过的指令添加到一个列表中，当递归分析时如果发现这个列表中已经包含当前的指令，即可终止递归。另外，实际应用时，因为递归的过程中可能涉及多个基本块，可能需要根据当前指令是否与其他指令位于同一基本块而人为中断递归。

体会
----

* 要对技术怀有好奇心，当听到一个新的名字的时候，要花点时间搜索一下。